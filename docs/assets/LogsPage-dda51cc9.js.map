{"version":3,"file":"LogsPage-dda51cc9.js","sources":["../../node_modules/lucide-react/dist/esm/icons/filter.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../src/components/LogsPage.tsx"],"sourcesContent":["/**\n * lucide-react v0.284.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Filter = createLucideIcon(\"Filter\", [\n  [\n    \"polygon\",\n    { points: \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\", key: \"1yg77f\" }\n  ]\n]);\n\nexport { Filter as default };\n//# sourceMappingURL=filter.js.map\n","/**\n * lucide-react v0.284.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * lucide-react v0.284.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/Card';\nimport { Badge } from './ui/Badge';\nimport { API } from '../services/api';\nimport { websocketService } from '../services/websocket';\nimport { FileText, Filter, Search, AlertTriangle, Info, AlertCircle } from 'lucide-react';\n\nexport default function LogsPage() {\n  const [logs, setLogs] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [search, setSearch] = useState('');\n\n  useEffect(() => {\n    const loadLogs = async () => {\n      try {\n        setLoading(true);\n        const data = await API.getLogs({ limit: 100 });\n        setLogs(Array.isArray(data) ? data : []);\n      } catch (err) {\n        console.error('Failed to load logs:', err);\n        // Fallback data\n        setLogs([\n          {\n            id: 1,\n            timestamp: new Date().toISOString(),\n            level: 'info',\n            message: 'سیستم با موفقیت راه‌اندازی شد',\n            source: 'system'\n          },\n          {\n            id: 2,\n            timestamp: new Date(Date.now() - 5 * 60 * 1000).toISOString(),\n            level: 'warning',\n            message: 'استفاده از حافظه بالا است',\n            source: 'monitoring'\n          },\n          {\n            id: 3,\n            timestamp: new Date(Date.now() - 10 * 60 * 1000).toISOString(),\n            level: 'error',\n            message: 'خطا در اتصال به پایگاه داده',\n            source: 'database'\n          }\n        ]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadLogs();\n  }, []);\n\n  // Real-time log updates\n  useEffect(() => {\n    websocketService.connect();\n\n    const handleLogUpdate = (data: any) => {\n      setLogs(prev => [data, ...prev].slice(0, 100));\n    };\n\n    websocketService.on('log_update', handleLogUpdate);\n\n    return () => {\n      websocketService.off('log_update', handleLogUpdate);\n    };\n  }, []);\n\n  const getLevelColor = (level: string) => {\n    switch (level) {\n      case 'error':\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\n      case 'warning':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';\n      case 'info':\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200';\n    }\n  };\n\n  const getLevelIcon = (level: string) => {\n    switch (level) {\n      case 'error':\n        return <AlertCircle className=\"h-4 w-4 text-red-600\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />;\n      case 'info':\n        return <Info className=\"h-4 w-4 text-blue-600\" />;\n      default:\n        return <FileText className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  const filteredLogs = logs.filter(log => {\n    if (filter !== 'all' && log.level !== filter) return false;\n    if (search && !log.message.toLowerCase().includes(search.toLowerCase())) return false;\n    return true;\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\" dir=\"rtl\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" dir=\"rtl\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">لاگ‌های سیستم</h1>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n          مشاهده و نظارت بر رویدادهای سیستم\n        </p>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Filter className=\"h-5 w-5\" />\n            فیلترها\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setFilter('all')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'all' \n                    ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                همه\n              </button>\n              <button\n                onClick={() => setFilter('error')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'error' \n                    ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                خطا\n              </button>\n              <button\n                onClick={() => setFilter('warning')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'warning' \n                    ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                هشدار\n              </button>\n              <button\n                onClick={() => setFilter('info')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'info' \n                    ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                اطلاعات\n              </button>\n            </div>\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"جستجو در لاگ‌ها...\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                className=\"w-full pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Logs */}\n      <Card>\n        <CardHeader>\n          <CardTitle>لاگ‌های اخیر ({filteredLogs.length})</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n            {filteredLogs.map((log) => (\n              <div\n                key={log.id}\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg\"\n              >\n                <div className=\"flex-shrink-0 mt-0.5\">\n                  {getLevelIcon(log.level)}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <Badge className={getLevelColor(log.level)}>\n                      {log.level}\n                    </Badge>\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {new Date(log.timestamp).toLocaleString('fa-IR')}\n                    </span>\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {log.source}\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-gray-900 dark:text-white\">\n                    {log.message}\n                  </p>\n                </div>\n              </div>\n            ))}\n            \n            {filteredLogs.length === 0 && (\n              <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                هیچ لاگی یافت نشد\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"],"names":["Filter","createLucideIcon","Info","Search","LogsPage","logs","setLogs","useState","loading","setLoading","filter","setFilter","search","setSearch","useEffect","data","API","err","websocketService","handleLogUpdate","prev","getLevelColor","level","getLevelIcon","jsx","AlertCircle","AlertTriangle","FileText","filteredLogs","log","jsxs","Card","CardHeader","CardTitle","CardContent","e","Badge"],"mappings":"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","x_google_ignoreList":[0,1,2]}