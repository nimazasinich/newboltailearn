import{c as N,r as n,a as d,j as e,S as F,D as L,B as A}from"./index-HX4Gzs5S.js";import{w as i}from"./websocket-DNDIlghG.js";import{P as w,a as B}from"./play-DcD_rXGc.js";import"./wsClient-G4NJfN2L.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],k=N("plus",q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$=N("trash-2",O);function J(){const[u,x]=n.useState([]),[h,m]=n.useState([]),[v,p]=n.useState(!0),[_,g]=n.useState(!1),[M,y]=n.useState(new Map),[b,f]=n.useState(null),[r,l]=n.useState({name:"",type:"persian-bert",dataset_id:"",epochs:10,batch_size:32,learning_rate:.001});n.useEffect(()=>{S(),i.connect();const t=s=>{y(o=>new Map(o).set(s.modelId,s))},a=s=>{y(o=>{const j=new Map(o);return j.delete(s.modelId),j}),c()};return i.on("training_progress",t),i.on("training_complete",a),()=>{i.off("training_progress",t),i.off("training_complete",a),i.disconnect()}},[]);const S=async()=>{try{p(!0),f(null);const[t,a]=await Promise.all([d.getModels(),d.getDatasets()]);x(t||[]),m(a||[])}catch(t){console.error("Failed to load data:",t),f("خطا در بارگذاری داده‌ها"),x([{id:1,name:"مدل طبقه‌بندی اسناد حقوقی",type:"persian-bert",status:"completed",accuracy:.91,loss:.15,epochs:50,current_epoch:50,dataset_id:"legal-docs-1",config:'{"epochs": 50, "batch_size": 32, "learning_rate": 0.001}',created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:2,name:"مدل استخراج کلیدواژه",type:"dora",status:"training",accuracy:.73,loss:.35,epochs:100,current_epoch:45,dataset_id:"keywords-1",config:'{"epochs": 100, "batch_size": 16, "learning_rate": 0.0005}',created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),m([{id:"legal-docs-1",name:"اسناد حقوقی فارسی",samples:15e3,size_mb:245,status:"ready"},{id:"keywords-1",name:"کلیدواژه‌های حقوقی",samples:8500,size_mb:120,status:"ready"}])}finally{p(!1)}},c=async()=>{try{const t=await d.getModels();x(t||[])}catch(t){console.error("Failed to load models:",t)}},C=async t=>{t.preventDefault();try{await d.createModel({name:r.name,type:r.type,dataset_id:r.dataset_id,config:{epochs:r.epochs,batch_size:r.batch_size,learning_rate:r.learning_rate}}),g(!1),l({name:"",type:"persian-bert",dataset_id:"",epochs:10,batch_size:32,learning_rate:.001}),c()}catch(a){console.error("Failed to create model:",a),alert("خطا در ایجاد مدل")}},D=async t=>{try{await d.startTraining(t),c()}catch(a){console.error("Failed to start training:",a),alert("خطا در شروع آموزش")}},I=async t=>{try{await d.pauseTraining(t),c()}catch(a){console.error("Failed to pause training:",a),alert("خطا در توقف آموزش")}},P=async t=>{try{await d.resumeTraining(t),c()}catch(a){console.error("Failed to resume training:",a),alert("خطا در ادامه آموزش")}},T=async t=>{if(confirm("آیا مطمئن هستید که می‌خواهید این مدل را حذف کنید؟"))try{x(a=>a.filter(s=>s.id!==t))}catch(a){console.error("Failed to delete model:",a),alert("خطا در حذف مدل")}},z=t=>{switch(t){case"dora":return"DoRA";case"qr-adaptor":return"QR-Adaptor";case"persian-bert":return"Persian BERT";default:return t}},E=t=>{switch(t){case"training":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},R=t=>{switch(t){case"idle":return"آماده";case"training":return"در حال آموزش";case"completed":return"تکمیل شده";case"failed":return"ناموفق";case"paused":return"متوقف شده";default:return t}};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"مدیریت مدل‌ها"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"ایجاد، آموزش و مدیریت مدل‌های هوش مصنوعی حقوقی"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(k,{className:"h-4 w-4"}),"مدل جدید"]})]}),b&&e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-yellow-600"}),e.jsx("p",{className:"text-yellow-800 dark:text-yellow-200",children:b})]}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"در حال نمایش داده‌های نمونه"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(t=>{const a=M.get(t.id),s=h.find(o=>o.id===t.dataset_id);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:z(t.type)})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(t.status)}`,children:R(t.status)})]}),t.status==="training"&&a&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsxs("span",{children:["Epoch ",a.epoch,"/",a.totalEpochs]}),e.jsxs("span",{children:[Math.round(a.epoch/a.totalEpochs*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.epoch/a.totalEpochs*100}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{children:["Loss: ",a.loss.toFixed(4)]}),e.jsxs("span",{children:["Accuracy: ",(a.accuracy*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t.accuracy?(t.accuracy*100).toFixed(1):"0.0","%"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"دقت"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t.current_epoch||0,"/",t.epochs||0]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Epochs"})]})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-xs",children:["(",s.samples.toLocaleString("fa-IR")," نمونه)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[t.status==="idle"&&e.jsxs("button",{onClick:()=>D(t.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded text-sm flex items-center justify-center gap-1 transition-colors",children:[e.jsx(w,{className:"h-3 w-3"}),"شروع آموزش"]}),t.status==="training"&&e.jsxs("button",{onClick:()=>I(t.id),className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded text-sm flex items-center justify-center gap-1 transition-colors",children:[e.jsx(B,{className:"h-3 w-3"}),"توقف"]}),t.status==="paused"&&e.jsxs("button",{onClick:()=>P(t.id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm flex items-center justify-center gap-1 transition-colors",children:[e.jsx(w,{className:"h-3 w-3"}),"ادامه"]}),e.jsx("button",{onClick:()=>T(t.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded text-sm flex items-center justify-center transition-colors",children:e.jsx($,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3 text-center",children:["ایجاد شده: ",new Date(t.created_at).toLocaleDateString("fa-IR")]})]},t.id)})}),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"هیچ مدلی یافت نشد"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"برای شروع، اولین مدل هوش مصنوعی خود را ایجاد کنید"}),e.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[e.jsx(k,{className:"h-4 w-4"}),"ایجاد مدل جدید"]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"ایجاد مدل جدید"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"نام مدل"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>l(a=>({...a,name:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"نوع مدل"}),e.jsxs("select",{value:r.type,onChange:t=>l(a=>({...a,type:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"persian-bert",children:"Persian BERT"}),e.jsx("option",{value:"dora",children:"DoRA"}),e.jsx("option",{value:"qr-adaptor",children:"QR-Adaptor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"دیتاست"}),e.jsxs("select",{value:r.dataset_id,onChange:t=>l(a=>({...a,dataset_id:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"انتخاب دیتاست"}),h.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.samples.toLocaleString("fa-IR")," نمونه)"]},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Epochs"}),e.jsx("input",{type:"number",value:r.epochs,onChange:t=>l(a=>({...a,epochs:parseInt(t.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"1",max:"1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Batch Size"}),e.jsx("input",{type:"number",value:r.batch_size,onChange:t=>l(a=>({...a,batch_size:parseInt(t.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"1",max:"512"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Learning Rate"}),e.jsx("input",{type:"number",value:r.learning_rate,onChange:t=>l(a=>({...a,learning_rate:parseFloat(t.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",step:"0.0001",min:"0.0001",max:"1"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"ایجاد مدل"}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors",children:"انصراف"})]})]})]})})]})}export{J as ModelsPage};
//# sourceMappingURL=ModelsPage-CMVsUabM.js.map
