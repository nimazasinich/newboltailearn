import{c as i,r as a,j as e,a as w,F as N}from"./index-B6t0c70J.js";import{C as g,a as m,b as u,c as y}from"./Card-CDS4LrTn.js";import{B as v}from"./Badge-DntKSyWn.js";import{w as o}from"./websocket-CkjA9eLt.js";import{T as C}from"./triangle-alert-DWQRDuSj.js";import{C as L}from"./circle-alert-Ccm94idh.js";import"./wsClient-DgJ3GFrt.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],I=i("funnel",S);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],A=i("info",_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$=i("search",D);function P(){const[h,n]=a.useState([]),[b,x]=a.useState(!0),[r,l]=a.useState("all"),[d,f]=a.useState("");a.useEffect(()=>{(async()=>{try{x(!0);const s=await w.getLogs({limit:100});n(s||[])}catch(s){console.error("Failed to load logs:",s),n([{id:1,timestamp:new Date().toISOString(),level:"info",message:"سیستم با موفقیت راه‌اندازی شد",source:"system"},{id:2,timestamp:new Date(Date.now()-3e5).toISOString(),level:"warning",message:"استفاده از حافظه بالا است",source:"monitoring"},{id:3,timestamp:new Date(Date.now()-6e5).toISOString(),level:"error",message:"خطا در اتصال به پایگاه داده",source:"database"}])}finally{x(!1)}})()},[]),a.useEffect(()=>{o.connect();const t=s=>{n(j=>[s,...j].slice(0,100))};return o.on("log_update",t),()=>{o.off("log_update",t)}},[]);const p=t=>{switch(t){case"error":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"warning":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"info":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},k=t=>{switch(t){case"error":return e.jsx(L,{className:"h-4 w-4 text-red-600"});case"warning":return e.jsx(C,{className:"h-4 w-4 text-yellow-600"});case"info":return e.jsx(A,{className:"h-4 w-4 text-blue-600"});default:return e.jsx(N,{className:"h-4 w-4 text-gray-600"})}},c=h.filter(t=>!(r!=="all"&&t.level!==r||d&&!t.message.toLowerCase().includes(d.toLowerCase())));return b?e.jsx("div",{className:"flex items-center justify-center h-64",dir:"rtl",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"لاگ‌های سیستم"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"مشاهده و نظارت بر رویدادهای سیستم"})]}),e.jsxs(g,{children:[e.jsx(m,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"فیلترها"]})}),e.jsx(y,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 rounded text-sm ${r==="all"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:"همه"}),e.jsx("button",{onClick:()=>l("error"),className:`px-3 py-1 rounded text-sm ${r==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:"خطا"}),e.jsx("button",{onClick:()=>l("warning"),className:`px-3 py-1 rounded text-sm ${r==="warning"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:"هشدار"}),e.jsx("button",{onClick:()=>l("info"),className:`px-3 py-1 rounded text-sm ${r==="info"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:"اطلاعات"})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx($,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"جستجو در لاگ‌ها...",value:d,onChange:t=>f(t.target.value),className:"w-full pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})})]}),e.jsxs(g,{children:[e.jsx(m,{children:e.jsxs(u,{children:["لاگ‌های اخیر (",c.length,")"]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[c.map(t=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:k(t.level)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(v,{className:p(t.level),children:t.level}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.timestamp).toLocaleString("fa-IR")}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.source})]}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.message})]})]},t.id)),c.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"هیچ لاگی یافت نشد"})]})})]})]})}export{P as default};
//# sourceMappingURL=LogsPage-B_kZhYlA.js.map
