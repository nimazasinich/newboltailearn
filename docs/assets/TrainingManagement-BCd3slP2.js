import{c as T,r as m,j as e,B as g,T as P,a as x}from"./index-BDtosiPh.js";import{C as h,c as u,a as E,b as F}from"./Card-B3lAC7et.js";import{B as o}from"./Button-ouxFDSfS.js";import{P as L}from"./Progress-DS_MWq3B.js";import{B as d}from"./Badge-Cbt-t_nP.js";import{w as i}from"./websocket-BFluELsP.js";import{T as p}from"./triangle-alert-CqCE9ZeV.js";import{P as w,a as b}from"./play-C2qY-MWB.js";import{R}from"./refresh-cw-wStMW2co.js";import"./wsClient-2zWT-7T1.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],v=T("circle-check-big",O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k=T("clock",$);function W(){const[j,c]=m.useState([]),[y,N]=m.useState(!0),[f,S]=m.useState(null);m.useEffect(()=>{(async()=>{try{N(!0);const s=await x.getModels();s&&c(s.map((t,l)=>({id:t.id||l,name:t.name||`مدل ${l+1}`,status:t.status||"pending",progress:t.progress||0,accuracy:t.accuracy||0,startTime:t.startTime||new Date().toISOString(),estimatedCompletion:t.estimatedCompletion,modelType:t.type||"LSTM",dataset:t.dataset||"قوانین مدنی"})))}catch(s){console.error("Failed to load training sessions:",s),S("خطا در بارگذاری جلسات آموزش"),c([{id:1,name:"مدل طبقه‌بندی اسناد حقوقی",status:"training",progress:65,accuracy:.87,startTime:new Date(Date.now()-72e5).toISOString(),estimatedCompletion:new Date(Date.now()+36e5).toISOString(),modelType:"BERT",dataset:"قوانین مدنی"},{id:2,name:"مدل استخراج کلیدواژه",status:"paused",progress:30,accuracy:.73,startTime:new Date(Date.now()-144e5).toISOString(),modelType:"LSTM",dataset:"قوانین جزایی"},{id:3,name:"مدل خلاصه‌سازی متن",status:"completed",progress:100,accuracy:.91,startTime:new Date(Date.now()-864e5).toISOString(),modelType:"T5",dataset:"قوانین تجاری"}])}finally{N(!1)}})()},[]),m.useEffect(()=>{i.connect();const a=l=>{c(n=>n.map(r=>r.id===l.modelId?{...r,progress:l.progress,accuracy:l.accuracy}:r))},s=l=>{c(n=>n.map(r=>r.id===l.modelId?{...r,status:"completed",progress:100}:r))},t=l=>{c(n=>n.map(r=>r.id===l.modelId?{...r,status:"failed"}:r))};return i.on("training_progress",a),i.on("training_complete",s),i.on("training_error",t),()=>{i.off("training_progress",a),i.off("training_complete",s),i.off("training_error",t)}},[]);const C=async a=>{try{await x.startTraining(a),c(s=>s.map(t=>t.id===a?{...t,status:"training"}:t))}catch(s){console.error("Failed to start training:",s)}},D=async a=>{try{await x.pauseTraining(a),c(s=>s.map(t=>t.id===a?{...t,status:"paused"}:t))}catch(s){console.error("Failed to pause training:",s)}},_=async a=>{try{await x.resumeTraining(a),c(s=>s.map(t=>t.id===a?{...t,status:"training"}:t))}catch(s){console.error("Failed to resume training:",s)}},B=a=>{switch(a){case"training":return e.jsx(d,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"در حال آموزش"});case"paused":return e.jsx(d,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"متوقف شده"});case"completed":return e.jsx(d,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"تکمیل شده"});case"failed":return e.jsx(d,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"ناموفق"});case"pending":return e.jsx(d,{className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",children:"در انتظار"});default:return e.jsx(d,{children:"نامشخص"})}},I=a=>{switch(a){case"training":return e.jsx(R,{className:"h-4 w-4 animate-spin text-blue-600"});case"paused":return e.jsx(b,{className:"h-4 w-4 text-yellow-600"});case"completed":return e.jsx(v,{className:"h-4 w-4 text-green-600"});case"failed":return e.jsx(p,{className:"h-4 w-4 text-red-600"});default:return e.jsx(k,{className:"h-4 w-4 text-gray-600"})}},M=a=>{const s=new Date(a),l=new Date().getTime()-s.getTime(),n=Math.floor(l/(1e3*60*60)),r=Math.floor(l%(1e3*60*60)/(1e3*60));return n>0?`${n} ساعت و ${r} دقیقه`:`${r} دقیقه`};return y?e.jsx("div",{className:"space-y-6",dir:"rtl",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map((a,s)=>e.jsx(h,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"})]})},s))})}):e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"مدیریت آموزش مدل‌ها"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"نظارت و کنترل جلسات آموزش مدل‌های یادگیری ماشین"})]}),e.jsxs(o,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(g,{className:"h-4 w-4 ml-2"}),"ایجاد مدل جدید"]})]}),f&&e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5 text-yellow-600"}),e.jsx("p",{className:"text-yellow-800 dark:text-yellow-200",children:f})]}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"در حال نمایش داده‌های نمونه"})]}),e.jsx("div",{className:"space-y-4",children:j.map(a=>e.jsxs(h,{className:"overflow-hidden",children:[e.jsx(E,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[I(a.status),e.jsx(F,{className:"text-xl",children:a.name}),B(a.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"نوع مدل:"})," ",a.modelType]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"مجموعه داده:"})," ",a.dataset]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"مدت زمان:"})," ",M(a.startTime)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"دقت فعلی:"})," ",(a.accuracy*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 mr-4",children:[a.status==="pending"&&e.jsx(o,{size:"sm",onClick:()=>C(a.id),className:"bg-green-600 hover:bg-green-700",children:e.jsx(w,{className:"h-4 w-4"})}),a.status==="training"&&e.jsx(o,{size:"sm",variant:"outline",onClick:()=>D(a.id),children:e.jsx(b,{className:"h-4 w-4"})}),a.status==="paused"&&e.jsx(o,{size:"sm",onClick:()=>_(a.id),className:"bg-blue-600 hover:bg-blue-700",children:e.jsx(w,{className:"h-4 w-4"})})]})]})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"پیشرفت آموزش"}),e.jsxs("span",{children:[a.progress,"%"]})]}),e.jsx(L,{value:a.progress,className:"h-2"})]}),a.status==="training"&&a.estimatedCompletion&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(k,{className:"h-4 w-4 inline ml-1"}),"زمان تخمینی تکمیل: ",new Date(a.estimatedCompletion).toLocaleTimeString("fa-IR")]}),a.status==="completed"&&e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(v,{className:"h-4 w-4"}),"آموزش با موفقیت تکمیل شد"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-4 w-4"}),"دقت نهایی: ",(a.accuracy*100).toFixed(1),"%"]})]}),a.status==="failed"&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-600",children:[e.jsx(p,{className:"h-4 w-4"}),"خطا در آموزش مدل"]})]})})]},a.id))}),j.length===0&&!y&&e.jsx(h,{children:e.jsxs(u,{className:"text-center py-12",children:[e.jsx(g,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"هیچ جلسه آموزشی یافت نشد"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"برای شروع، یک مدل جدید ایجاد کنید"}),e.jsxs(o,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(g,{className:"h-4 w-4 ml-2"}),"ایجاد اولین مدل"]})]})})]})}export{W as default};
//# sourceMappingURL=TrainingManagement-BCd3slP2.js.map
