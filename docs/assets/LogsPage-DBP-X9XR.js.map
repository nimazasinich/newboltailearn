{"version":3,"file":"LogsPage-DBP-X9XR.js","sources":["../../node_modules/lucide-react/dist/esm/icons/funnel.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../src/components/LogsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z\",\n      key: \"sc7q7i\"\n    }\n  ]\n];\nconst Funnel = createLucideIcon(\"funnel\", __iconNode);\n\nexport { __iconNode, Funnel as default };\n//# sourceMappingURL=funnel.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n];\nconst Info = createLucideIcon(\"info\", __iconNode);\n\nexport { __iconNode, Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/Card';\nimport { Badge } from './ui/Badge';\nimport { API } from '../services/api';\nimport { websocketService } from '../services/websocket';\nimport { FileText, Filter, Search, AlertTriangle, Info, AlertCircle } from 'lucide-react';\n\nexport default function LogsPage() {\n  const [logs, setLogs] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [search, setSearch] = useState('');\n\n  useEffect(() => {\n    const loadLogs = async () => {\n      try {\n        setLoading(true);\n        const data = await API.getLogs({ limit: 100 });\n        setLogs(data || []);\n      } catch (err) {\n        console.error('Failed to load logs:', err);\n        // Fallback data\n        setLogs([\n          {\n            id: 1,\n            timestamp: new Date().toISOString(),\n            level: 'info',\n            message: 'سیستم با موفقیت راه‌اندازی شد',\n            source: 'system'\n          },\n          {\n            id: 2,\n            timestamp: new Date(Date.now() - 5 * 60 * 1000).toISOString(),\n            level: 'warning',\n            message: 'استفاده از حافظه بالا است',\n            source: 'monitoring'\n          },\n          {\n            id: 3,\n            timestamp: new Date(Date.now() - 10 * 60 * 1000).toISOString(),\n            level: 'error',\n            message: 'خطا در اتصال به پایگاه داده',\n            source: 'database'\n          }\n        ]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadLogs();\n  }, []);\n\n  // Real-time log updates\n  useEffect(() => {\n    websocketService.connect();\n\n    const handleLogUpdate = (data: any) => {\n      setLogs(prev => [data, ...prev].slice(0, 100));\n    };\n\n    websocketService.on('log_update', handleLogUpdate);\n\n    return () => {\n      websocketService.off('log_update', handleLogUpdate);\n    };\n  }, []);\n\n  const getLevelColor = (level: string) => {\n    switch (level) {\n      case 'error':\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\n      case 'warning':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';\n      case 'info':\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200';\n    }\n  };\n\n  const getLevelIcon = (level: string) => {\n    switch (level) {\n      case 'error':\n        return <AlertCircle className=\"h-4 w-4 text-red-600\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />;\n      case 'info':\n        return <Info className=\"h-4 w-4 text-blue-600\" />;\n      default:\n        return <FileText className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  const filteredLogs = logs.filter(log => {\n    if (filter !== 'all' && log.level !== filter) return false;\n    if (search && !log.message.toLowerCase().includes(search.toLowerCase())) return false;\n    return true;\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\" dir=\"rtl\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" dir=\"rtl\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">لاگ‌های سیستم</h1>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n          مشاهده و نظارت بر رویدادهای سیستم\n        </p>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Filter className=\"h-5 w-5\" />\n            فیلترها\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setFilter('all')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'all' \n                    ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                همه\n              </button>\n              <button\n                onClick={() => setFilter('error')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'error' \n                    ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                خطا\n              </button>\n              <button\n                onClick={() => setFilter('warning')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'warning' \n                    ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                هشدار\n              </button>\n              <button\n                onClick={() => setFilter('info')}\n                className={`px-3 py-1 rounded text-sm ${\n                  filter === 'info' \n                    ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                    : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n                }`}\n              >\n                اطلاعات\n              </button>\n            </div>\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"جستجو در لاگ‌ها...\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                className=\"w-full pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Logs */}\n      <Card>\n        <CardHeader>\n          <CardTitle>لاگ‌های اخیر ({filteredLogs.length})</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n            {filteredLogs.map((log) => (\n              <div\n                key={log.id}\n                className=\"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg\"\n              >\n                <div className=\"flex-shrink-0 mt-0.5\">\n                  {getLevelIcon(log.level)}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <Badge className={getLevelColor(log.level)}>\n                      {log.level}\n                    </Badge>\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {new Date(log.timestamp).toLocaleString('fa-IR')}\n                    </span>\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      {log.source}\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-gray-900 dark:text-white\">\n                    {log.message}\n                  </p>\n                </div>\n              </div>\n            ))}\n            \n            {filteredLogs.length === 0 && (\n              <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                هیچ لاگی یافت نشد\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"],"names":["__iconNode","Funnel","createLucideIcon","Info","Search","LogsPage","logs","setLogs","useState","loading","setLoading","filter","setFilter","search","setSearch","useEffect","data","API","err","websocketService","handleLogUpdate","prev","getLevelColor","level","getLevelIcon","jsx","AlertCircle","AlertTriangle","FileText","filteredLogs","log","jsxs","Card","CardHeader","CardTitle","Filter","CardContent","e","Badge"],"mappings":"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","x_google_ignoreList":[0,1,2]}