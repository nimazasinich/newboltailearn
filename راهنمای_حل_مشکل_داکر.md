# 🚀 راهنمای کامل حل مشکل Docker Build

## 🎯 خلاصه مشکل
خطای `ERROR: failed to read dockerfile: open Dockerfile: no such file or directory` به دلیل عدم وجود Docker daemon یا مشکلات دسترسی رخ می‌دهد.

## ✅ تشخیص و حل مشکل

### 1️⃣ بررسی وضعیت فعلی
```bash
# بررسی وجود Dockerfile
ls -la Dockerfile

# بررسی نصب Docker
docker --version
```

### 2️⃣ راه‌حل اتوماتیک (پیشنهادی)
```bash
# اجرای اسکریپت خودکار حل مشکل
./docker-autofix.sh
```

### 3️⃣ راه‌حل دستی

#### نصب Docker:
```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
```

#### راه‌اندازی Docker daemon:
```bash
# روش 1: استفاده از service
sudo service docker start

# روش 2: راه‌اندازی دستی
sudo dockerd --host=unix:///var/run/docker.sock --iptables=false --bridge=none &

# حل مشکل دسترسی
sudo chmod 666 /var/run/docker.sock
```

#### بیلد تصاویر Docker:
```bash
# بیلد بک‌اند
docker build --target backend -t newboltailearn-backend .

# بیلد فرانت‌اند
docker build --target frontend -t newboltailearn-frontend .

# بیلد development
docker build --target development -t newboltailearn-dev .
```

## 🔄 راه‌حل‌های جایگزین

### روش 1: اجرای مستقیم با Node.js
```bash
npm install
npm run dev
```

### روش 2: استفاده از PM2
```bash
npm install -g pm2
pm2 start server.js --name "newboltailearn"
```

### روش 3: استفاده از Docker Compose
```bash
docker-compose up --build
```

## 🛠️ اسکریپت‌های کمکی

### بیلد سریع:
```bash
./docker-quick-build.sh
```

### اجرای سریع:
```bash
./docker-quick-run.sh
```

### پاک‌سازی:
```bash
./docker-cleanup.sh
```

## 🚨 رفع مشکلات رایج

### مشکل: "Cannot connect to the Docker daemon"
**حل:**
```bash
sudo service docker start
sudo chmod 666 /var/run/docker.sock
```

### مشکل: "permission denied"
**حل:**
```bash
sudo usermod -aG docker $USER
# یا استفاده از sudo
sudo docker build -t newboltailearn .
```

### مشکل: "no such file or directory"
**حل:**
```bash
# اطمینان از بودن در مسیر صحیح
pwd
ls -la Dockerfile
```

## 🎯 دستورات کاربردی

### بررسی تصاویر ساخته شده:
```bash
docker images | grep newboltailearn
```

### اجرای کانتینر:
```bash
docker run -p 3000:3000 newboltailearn-dev
```

### مشاهده لاگ‌ها:
```bash
docker logs [container-id]
```

## 📋 چک‌لیست نهایی

- [ ] ✅ Dockerfile موجود است
- [ ] ✅ Docker نصب شده است
- [ ] ✅ Docker daemon در حال اجرا است
- [ ] ✅ دسترسی‌های لازم تنظیم شده است
- [ ] ✅ بیلد با موفقیت انجام شده است

## 🆘 در صورت ادامه مشکل

اگر Docker همچنان کار نمی‌کند، می‌توانید به سادگی از Node.js مستقیماً استفاده کنید:

```bash
npm install
npm run dev
```

## 📞 پشتیبانی

برای کمک بیشتر، فایل `DOCKER_ALTERNATIVES.md` را مطالعه کنید.